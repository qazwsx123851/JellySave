# JellySave 重新設計需求文件

## 簡介

JellySave 是一款專為台灣用戶設計的個人財務管理 iOS 應用程式，專注於本地資產追蹤、儲蓄目標管理和財務習慣養成。本次重新設計旨在提升用戶體驗、增強視覺設計，並新增智能分析功能，打造更直觀且具激勵性的離線財務管理工具。

## 術語表

- **JellySave_System**: JellySave iOS 應用程式系統
- **User**: 使用 JellySave 應用程式的個人用戶
- **Account**: 用戶的金融帳戶（現金、股票、外幣、保險、加密貨幣）
- **SavingGoal**: 用戶設定的儲蓄目標
- **AssetSnapshot**: 特定時間點的資產總額記錄

- **ProgressRing**: 圓形進度指示器組件
- **HeroCard**: 首頁主要資產展示卡片
- **Core_Data**: Apple 的本地資料持久化框架
- **LocalNotification**: 本地推播通知
- **Lottie**: Airbnb 開發的動畫庫，用於播放 After Effects 動畫
- **SwiftUI_Animation**: SwiftUI 內建動畫系統
- **SkeletonView**: 骨架屏載入動畫
- **CountingLabel**: 數字計數動畫組件

## 需求

### 需求 1

**用戶故事**: 作為一個想要管理個人財務的用戶，我希望能夠快速查看我的總資產和最新財務狀況，以便了解我的整體財務健康度。

#### 驗收標準

1. WHEN User 開啟應用程式，THE JellySave_System SHALL 在 2 秒內顯示總資產金額
2. THE JellySave_System SHALL 以新台幣格式顯示所有金額數據
3. WHEN User 查看首頁，THE JellySave_System SHALL 顯示最近 6 個月的資產趨勢圖表
4. THE JellySave_System SHALL 提供資產變化百分比和趨勢方向指示
5. WHEN 資產數據更新時，THE JellySave_System SHALL 以動畫效果呈現數字變化

### 需求 2

**用戶故事**: 作為一個有多個金融帳戶的用戶，我希望能夠統一管理所有帳戶資訊，以便追蹤不同來源的資產。

#### 驗收標準

1. THE JellySave_System SHALL 支援現金帳戶、股票帳戶、外幣帳戶、保險和加密貨幣五種帳戶類型
2. WHEN User 新增帳戶，THE JellySave_System SHALL 要求輸入帳戶名稱、類型和初始餘額
3. THE JellySave_System SHALL 為每種帳戶類型提供不同的視覺標識和圖示
4. WHEN User 查看帳戶列表，THE JellySave_System SHALL 按帳戶類型分組顯示
5. THE JellySave_System SHALL 顯示每個帳戶的最後更新時間和月度變化

### 需求 3

**用戶故事**: 作為一個想要達成財務目標的用戶，我希望能夠設定和追蹤儲蓄目標，以便保持儲蓄動機和進度掌控。

#### 驗收標準

1. WHEN User 創建儲蓄目標，THE JellySave_System SHALL 要求輸入目標名稱、目標金額和截止日期
2. THE JellySave_System SHALL 自動計算達成目標所需的每月儲蓄金額
3. THE JellySave_System SHALL 使用 ProgressRing 組件顯示目標完成百分比
4. WHEN 儲蓄目標達成時，THE JellySave_System SHALL 播放慶祝動畫
5. THE JellySave_System SHALL 提供目標進度的視覺化追蹤介面

### 需求 4

**用戶故事**: 作為一個想要養成良好財務習慣的用戶，我希望收到定期的激勵通知和財務提醒，以便保持儲蓄動機。

#### 驗收標準

1. THE JellySave_System SHALL 每日在用戶設定的時間發送 LocalNotification
2. WHEN User 首次使用應用程式，THE JellySave_System SHALL 請求通知權限
3. THE JellySave_System SHALL 從預設的激勵名言庫中隨機選擇通知內容
4. WHERE User 啟用通知功能，THE JellySave_System SHALL 允許自訂通知時間
5. THE JellySave_System SHALL 提供投資建議和儲蓄激勵兩種通知類型

### 需求 5

**用戶故事**: 作為一個重視資料隱私的用戶，我希望我的財務數據完全儲存在本地裝置上，以便確保資料安全且無需網路連線。

#### 驗收標準

1. THE JellySave_System SHALL 使用 Core_Data 將所有用戶數據儲存在本地裝置
2. THE JellySave_System SHALL 在離線狀態下提供完整功能
3. WHEN User 刪除應用程式時，THE JellySave_System SHALL 完全移除所有本地數據

### 需求 6

**用戶故事**: 作為一個重視數據安全的用戶，我希望我的敏感財務資訊在本地裝置上得到妥善保護，以便安心使用應用程式。

#### 驗收標準

1. THE JellySave_System SHALL 使用 iOS Keychain 儲存應用程式解鎖密碼
2. THE JellySave_System SHALL 支援 Face ID 或 Touch ID 進行應用程式解鎖
3. THE JellySave_System SHALL 提供完整的本地數據清除功能

### 需求 7

**用戶故事**: 作為一個想要簡單管理財務的用戶，我希望能夠手動輸入和查看我的財務資料，以便掌握基本的財務狀況。

#### 驗收標準

1. THE JellySave_System SHALL 允許用戶手動輸入帳戶餘額變更
2. THE JellySave_System SHALL 提供簡單的資產總覽和歷史記錄查看
3. THE JellySave_System SHALL 顯示儲蓄目標的基本進度資訊
4. THE JellySave_System SHALL 允許用戶查看過去的資產變化記錄
5. THE JellySave_System SHALL 為未來版本預留智能分析功能的擴展空間

### 需求 8

**用戶故事**: 作為一個視覺障礙的用戶，我希望應用程式具備基本的無障礙功能，以便我能夠順利使用核心功能。

#### 驗收標準

1. THE JellySave_System SHALL 為所有互動元素提供適當的無障礙標籤
2. THE JellySave_System SHALL 確保顏色對比度符合 WCAG 2.1 AA 標準

### 需求 9

**用戶故事**: 作為一個注重應用程式效能的用戶，我希望應用程式運行流暢且響應迅速，以便獲得良好的使用體驗。

#### 驗收標準

1. THE JellySave_System SHALL 在 iPhone 12 或更新機型上以 60fps 運行所有動畫
2. WHEN User 啟動應用程式，THE JellySave_System SHALL 在 2 秒內完成載入
3. THE JellySave_System SHALL 將記憶體使用量控制在 100MB 以下
4. WHEN User 切換頁面時，THE JellySave_System SHALL 在 300 毫秒內完成轉場
5. THE JellySave_System SHALL 使用 NSFetchedResultsController 優化大量數據的顯示效能

### 需求 10

**用戶故事**: 作為一個追求流暢體驗的用戶，我希望應用程式具備豐富的動畫效果和微互動，以便獲得愉悅且直觀的操作體驗。

#### 驗收標準

1. WHEN User 點擊卡片或按鈕時，THE JellySave_System SHALL 提供彈性縮放回饋動畫
2. THE JellySave_System SHALL 在數字變化時使用計數動畫效果
3. WHEN User 滑動刪除項目時，THE JellySave_System SHALL 播放流暢的滑出動畫
4. THE JellySave_System SHALL 在頁面轉場時使用彈性過渡動畫
5. WHEN 載入數據時，THE JellySave_System SHALL 顯示骨架屏動畫或優雅的載入指示器

### 需求 11

**用戶故事**: 作為一個想要個人化體驗的用戶，我希望能夠切換應用程式的外觀主題，以便符合我的視覺偏好。

#### 驗收標準

1. THE JellySave_System SHALL 支援淺色和深色主題模式
2. WHEN User 修改主題設定，THE JellySave_System SHALL 即時套用變更

### 需求 12

**用戶故事**: 作為一個開發者，我希望使用成熟的第三方動畫庫來實現複雜的動畫效果，以便提升開發效率並確保動畫品質。

#### 驗收標準

1. THE JellySave_System SHALL 整合 Lottie-iOS 用於播放慶祝動畫和載入動畫
2. THE JellySave_System SHALL 使用 SkeletonView 實現優雅的內容載入狀態
3. WHEN 顯示金額變化時，THE JellySave_System SHALL 使用 SwiftUI 內建動畫實現數字滾動效果
4. THE JellySave_System SHALL 使用 SwiftUI Spring 動畫增強按鈕和卡片的互動回饋
5. WHERE 需要複雜手勢動畫，THE JellySave_System SHALL 使用 SwiftUI 內建動畫框架

## 使用者流程設計

### 主要使用者流程

#### 1. 首次使用流程
```
啟動應用程式 → 歡迎畫面 → 設定生物識別解鎖（可選） → 新增第一個帳戶 → 進入首頁
```

**詳細步驟：**
1. 用戶首次開啟 JellySave
2. 顯示歡迎畫面和應用程式介紹
3. 詢問是否啟用 Face ID/Touch ID 解鎖
4. 引導用戶新增第一個帳戶（現金/股票/外幣/保險/加密貨幣）
5. 輸入帳戶名稱、類型和初始餘額
6. 完成設定後進入首頁，顯示總資產

#### 2. 日常使用流程
```
解鎖應用程式 → 查看首頁總資產 → 更新帳戶餘額 或 查看儲蓄目標進度 → 離開應用程式
```

**詳細步驟：**
1. 用戶開啟應用程式（生物識別解鎖）
2. 查看首頁的總資產和月度趨勢
3. 選擇操作：
   - 更新帳戶餘額
   - 查看或新增儲蓄目標
   - 查看帳戶詳情
4. 完成操作後離開應用程式

#### 3. 帳戶管理流程
```
首頁 → 帳戶頁面 → 選擇帳戶 → 查看詳情/編輯 → 更新餘額 → 儲存變更
```

**詳細步驟：**
1. 從首頁點擊「帳戶」標籤
2. 查看按類型分組的帳戶列表
3. 點擊特定帳戶查看詳情
4. 編輯帳戶資訊或更新餘額
5. 儲存變更，系統自動更新總資產

#### 4. 新增帳戶流程
```
帳戶頁面 → 點擊「新增帳戶」→ 選擇帳戶類型 → 輸入帳戶資訊 → 確認新增
```

**詳細步驟：**
1. 在帳戶頁面點擊「新增帳戶」按鈕
2. 選擇帳戶類型（現金/股票/外幣/保險/加密貨幣）
3. 輸入帳戶名稱
4. 輸入初始餘額
5. 確認新增，帳戶出現在對應分類中

#### 5. 儲蓄目標管理流程
```
首頁 → 儲蓄目標頁面 → 新增目標 → 設定目標詳情 → 追蹤進度 → 達成慶祝
```

**詳細步驟：**
1. 從首頁點擊「儲蓄目標」標籤
2. 查看現有目標列表和進度
3. 點擊「新增目標」創建新的儲蓄目標
4. 輸入目標名稱、目標金額、截止日期
5. 系統自動計算每月所需儲蓄金額
6. 定期更新目標進度
7. 達成目標時播放慶祝動畫

#### 6. 設定管理流程
```
首頁 → 設定頁面 → 選擇設定項目 → 修改設定 → 儲存變更
```

**詳細步驟：**
1. 從首頁點擊「設定」標籤
2. 查看可用的設定選項
3. 修改通知設定（時間、類型）
4. 切換深淺色主題
5. 管理生物識別解鎖
6. 查看應用程式資訊

### 次要使用者流程

#### 7. 資料備份流程
```
設定頁面 → 資料管理 → 匯出備份 → 選擇儲存位置 → 完成備份
```

#### 8. 資料還原流程
```
設定頁面 → 資料管理 → 匯入備份 → 選擇備份檔案 → 確認還原 → 重啟應用程式
```

#### 9. 通知設定流程
```
設定頁面 → 通知設定 → 開啟/關閉通知 → 設定通知時間 → 選擇通知類型 → 儲存設定
```

### 錯誤處理流程

#### 10. 資料輸入錯誤處理
```
輸入無效資料 → 顯示錯誤提示 → 用戶修正輸入 → 重新驗證 → 成功儲存
```

#### 11. 生物識別失敗處理
```
生物識別失敗 → 提供重試選項 → 多次失敗後要求密碼 → 成功解鎖或退出應用程式
```

### 頁面導航結構

```
首頁 (HomeView)
├── 總資產卡片
├── 月度趨勢圖表
├── 快速操作區域
└── 底部導航

帳戶頁面 (AccountsView)
├── 帳戶總覽
├── 按類型分組的帳戶列表
│   ├── 現金帳戶
│   ├── 股票帳戶
│   ├── 外幣帳戶
│   ├── 保險
│   └── 加密貨幣
└── 新增帳戶按鈕

儲蓄目標頁面 (SavingGoalsView)
├── 進行中的目標
├── 已完成的目標
└── 新增目標按鈕

設定頁面 (SettingsView)
├── 通知設定
├── 主題切換
├── 安全設定
├── 資料管理
└── 應用程式資訊
```

### 使用者互動模式

#### 手勢操作
- **點擊**: 選擇項目、按鈕操作
- **長按**: 快速編輯、顯示選單
- **滑動**: 頁面切換、刪除項目
- **下拉**: 重新整理資料

#### 視覺回饋
- **按鈕點擊**: 縮放動畫回饋
- **資料更新**: 數字滾動動畫
- **頁面切換**: 滑動轉場動畫
- **目標達成**: 慶祝動畫效果

#### 狀態指示
- **載入中**: 骨架屏或載入指示器
- **成功操作**: 綠色勾選動畫
- **錯誤狀態**: 紅色警示和震動回饋
- **空狀態**: 友善的引導訊息和操作建議

## UI風格設計

### 設計理念

JellySave 採用「簡約現代」的設計語言，以清晰的視覺層次和溫暖的色彩搭配，營造出專業且親和的財務管理體驗。設計重點在於降低用戶的認知負擔，讓複雜的財務資訊變得易於理解和操作。

#### 核心設計原則
1. **可讀性優先**: 確保在任何光線條件下都能清晰閱讀
2. **一致性體驗**: 深淺色模式間保持相同的視覺層次和操作邏輯
3. **無障礙友善**: 符合 WCAG 2.1 AA 標準，支援輔助功能
4. **情感化設計**: 透過色彩和動畫傳達正向的財務管理體驗
5. **效能優化**: 流暢的動畫和快速的響應時間

#### 用戶體驗保證
- **主題切換**: 0.3秒平滑過渡，無閃爍或跳躍
- **文字清晰度**: 所有文字在兩種模式下都保持最佳可讀性
- **視覺連續性**: 切換主題時保持相同的資訊架構和導航邏輯
- **色彩語義**: 功能色彩（成功、警示、錯誤）在兩種模式下保持相同含義

### 色彩系統

#### 主要色彩
- **主色調 (Primary)**: 薄荷綠 `#4ECDC4`
  - 用途：主要按鈕、重要資訊強調、品牌識別
  - 象徵：成長、希望、財務健康

- **次要色調 (Secondary)**: 天空藍 `#5DADE2`
  - 用途：圖表、進度指示、輔助元素
  - 象徵：穩定、信任、未來

- **強調色 (Accent)**: 珊瑚粉 `#FF6B6B`
  - 用途：警示、重要提醒、達成慶祝
  - 象徵：活力、成就、激勵

#### 功能色彩
- **成功色**: 翠綠 `#2ECC71`
  - 用途：目標達成、正向變化、確認操作
  
- **警示色**: 暖黃 `#F39C12`
  - 用途：注意事項、待處理狀態、表單提示

- **錯誤色**: 溫和紅 `#E74C3C`
  - 用途：錯誤提示、刪除操作、風險警告

#### 中性色彩
- **深灰 (Text Primary)**: `#2C3E50`
  - 用途：主要文字、標題、重要資訊

- **中灰 (Text Secondary)**: `#7F8C8D`
  - 用途：次要文字、說明文字、時間戳記

- **淺灰 (Background)**: `#F8F9FA`
  - 用途：背景色、分隔線、卡片邊框

- **純白 (Card Background)**: `#FFFFFF`
  - 用途：卡片背景、輸入框、彈窗背景

### 字體系統

#### 字體層級
- **大標題 (Hero)**: 36pt, Bold, 用於總資產顯示
- **標題 (Title)**: 24pt, Semibold, 用於頁面標題
- **副標題 (Subtitle)**: 20pt, Medium, 用於區塊標題
- **內文 (Body)**: 16pt, Regular, 用於一般內容
- **說明文字 (Caption)**: 14pt, Regular, 用於輔助資訊
- **小字 (Small)**: 12pt, Regular, 用於時間戳記

#### 字體特性
- **主要字體**: SF Pro (iOS 系統字體)
- **數字字體**: SF Pro Rounded (用於金額顯示)
- **支援動態字體**: 完整支援 iOS Dynamic Type
- **最小字體大小**: 12pt (確保可讀性)

### 間距系統

#### 標準間距單位
- **XS**: 4pt - 元素內部微調
- **S**: 8pt - 相關元素間距
- **M**: 16pt - 一般元素間距
- **L**: 24pt - 區塊間距
- **XL**: 32pt - 大區塊間距
- **XXL**: 48pt - 頁面區段間距

#### 佈局原則
- **卡片內邊距**: 20pt
- **頁面邊距**: 16pt
- **按鈕高度**: 48pt (符合觸控標準)
- **最小觸控區域**: 44x44pt

### 圓角系統

#### 圓角規格
- **小圓角**: 8pt - 按鈕、標籤
- **中圓角**: 12pt - 卡片、輸入框
- **大圓角**: 20pt - 主要卡片、彈窗
- **圓形**: 50% - 頭像、圖示背景

### 陰影系統

#### 陰影層級
- **輕微陰影**: `rgba(0,0,0,0.05)`, blur: 4pt, offset: (0,2)
  - 用途：按鈕、小卡片

- **標準陰影**: `rgba(0,0,0,0.1)`, blur: 8pt, offset: (0,4)
  - 用途：一般卡片、輸入框

- **強調陰影**: `rgba(0,0,0,0.15)`, blur: 16pt, offset: (0,8)
  - 用途：重要卡片、彈窗

- **英雄陰影**: `rgba(76,205,196,0.25)`, blur: 20pt, offset: (0,12)
  - 用途：總資產卡片（帶品牌色彩）

### 圖示系統

#### 圖示風格
- **系統圖示**: 優先使用 SF Symbols
- **一致性**: 統一的線條粗細和風格
- **大小規格**: 16pt, 20pt, 24pt, 32pt
- **顏色**: 跟隨文字顏色或使用品牌色

#### 帳戶類型圖示
- **現金帳戶**: `dollarsign.circle`
- **股票帳戶**: `chart.line.uptrend.xyaxis`
- **外幣帳戶**: `globe`
- **保險**: `shield.checkered`
- **加密貨幣**: `bitcoinsign.circle`

### 動畫規範

#### 動畫時長
- **微互動**: 0.15s - 按鈕回饋
- **標準動畫**: 0.3s - 頁面切換
- **複雜動畫**: 0.5s - 數字計數
- **慶祝動畫**: 2.0s - 目標達成

#### 緩動函數
- **標準**: `ease-in-out` - 一般動畫
- **彈性**: `spring(response: 0.5, dampingFraction: 0.8)` - 按鈕互動
- **流暢**: `ease-out` - 進入動畫
- **快速**: `ease-in` - 退出動畫

### 卡片設計

#### 卡片類型
1. **英雄卡片** (總資產)
   - 漸層背景：薄荷綠到天空藍
   - 白色文字
   - 大圓角 (20pt)
   - 強調陰影

2. **資訊卡片** (帳戶、目標)
   - 白色背景
   - 中圓角 (12pt)
   - 標準陰影
   - 清晰的內容層次

3. **操作卡片** (快速操作)
   - 淺色背景
   - 小圓角 (8pt)
   - 輕微陰影
   - 明確的互動提示

### 按鈕設計

#### 按鈕類型
1. **主要按鈕** (Primary)
   - 薄荷綠背景
   - 白色文字
   - 中圓角
   - 點擊縮放效果

2. **次要按鈕** (Secondary)
   - 珊瑚粉背景
   - 白色文字
   - 中圓角
   - 點擊縮放效果

3. **邊框按鈕** (Outline)
   - 透明背景
   - 薄荷綠邊框和文字
   - 中圓角
   - 點擊變色效果

### 表單設計

#### 輸入框規範
- **背景**: 淺灰色 `#F8F9FA`
- **邊框**: 1pt, 透明（聚焦時顯示品牌色）
- **圓角**: 中圓角 (12pt)
- **內邊距**: 16pt
- **字體**: 16pt Body

#### 標籤設計
- **背景**: 半透明品牌色
- **文字**: 對應的深色
- **圓角**: 小圓角 (8pt)
- **內邊距**: 8pt x 12pt

### 深色模式適配

#### 色彩調整原則
- **確保對比度**: 所有文字與背景對比度 ≥ 4.5:1 (WCAG AA標準)
- **品牌色調整**: 在深色背景上提高亮度，確保可讀性
- **漸層適配**: 英雄卡片漸層在深色模式下使用較深的色調

#### 深色模式色彩規範
- **背景色**: `#000000` (純黑，提供最佳對比)
- **卡片背景**: `#1C1C1E` (系統深色背景)
- **次要背景**: `#2C2C2E` (輸入框、分組背景)
- **主要文字**: `#FFFFFF` (純白，最佳可讀性)
- **次要文字**: `#EBEBF5` (高對比度的淺色)
- **說明文字**: `#EBEBF5` 60% 透明度

#### 品牌色深色模式調整
- **主色調**: `#6EDDD6` (提高亮度的薄荷綠)
- **次要色調**: `#7DB8E8` (提高亮度的天空藍)
- **強調色**: `#FF8A8A` (提高亮度的珊瑚粉)
- **成功色**: `#52D273` (提高亮度的翠綠)
- **警示色**: `#FFB84D` (提高亮度的暖黃)

#### 英雄卡片深色模式
- **漸層背景**: 深色調的薄荷綠到天空藍
- **文字顏色**: 保持白色，確保最佳對比
- **陰影效果**: 使用較淺的品牌色陰影

#### 陰影與邊框策略
- **淺色模式**: 使用陰影營造層次
- **深色模式**: 結合淺色邊框 `rgba(255,255,255,0.1)` 和輕微陰影
- **卡片分離**: 使用 1pt 的淺色邊框確保視覺分離

#### 對比度驗證
- **主要文字**: 白色 on 黑色 = 21:1 (AAA級)
- **次要文字**: `#EBEBF5` on 黑色 = 15.8:1 (AAA級)
- **品牌色文字**: 調整後的薄荷綠 on 黑色 ≥ 4.5:1 (AA級)
- **按鈕文字**: 白色 on 品牌色背景 ≥ 4.5:1 (AA級)

### 響應式設計

#### 螢幕尺寸適配
- **iPhone SE**: 最小支援尺寸
- **iPhone 標準**: 主要設計目標
- **iPhone Plus/Max**: 利用額外空間
- **iPad**: 未來擴展考量

#### 動態字體支援
- 完整支援 iOS Dynamic Type
- 最大支援到 Accessibility 3
- 保持良好的視覺層次

### 主題切換實作規範

#### 切換動畫
- **過渡時間**: 0.3秒
- **緩動函數**: `ease-in-out`
- **元素順序**: 背景 → 卡片 → 文字 → 圖示
- **避免閃爍**: 使用 `CATransition` 確保平滑過渡

#### 狀態保持
- **用戶偏好**: 記住用戶選擇的主題設定
- **系統跟隨**: 支援跟隨系統設定選項
- **即時生效**: 設定變更立即套用到所有頁面

#### 測試檢查點
1. **對比度測試**: 使用工具驗證所有文字對比度
2. **可讀性測試**: 在不同光線環境下測試
3. **切換流暢度**: 確保無卡頓或視覺跳躍
4. **功能完整性**: 兩種模式下所有功能正常運作
5. **無障礙測試**: VoiceOver 在兩種模式下都能正確朗讀

#### 品質保證標準
- **對比度**: 所有文字元素 ≥ 4.5:1 (AA級)
- **切換速度**: 主題切換完成時間 ≤ 0.5秒
- **記憶體影響**: 主題切換不增加記憶體使用
- **電池影響**: 深色模式在 OLED 螢幕上節省電力