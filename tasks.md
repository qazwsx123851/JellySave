# JellySave 重新設計 - 實作任務清單

## 任務概覽

基於需求文件和設計文件，將 JellySave 重新設計分解為具體的開發任務。採用 UI 優先的開發流程，先完成所有靜態 UI 設計，再逐步加入業務邏輯和動態功能。總計 **52 個任務**（13 個主要任務 + 39 個子任務），分為 13 個主要階段。

## 實作任務

- [x] 1. 建立專案基礎架構
  - 創建新的 Xcode 專案，配置 iOS 16+ 目標
  - 設定 SwiftUI 應用程式生命週期
  - 配置 Bundle ID 和基本應用程式設定
  - 建立專案資料夾結構（Features、Shared、Core）
  - _需求: 需求 5, 9_

- [x] 2. 建立 UI 設計系統和主題
  - [x] 2.1 實作主題色彩系統
    - 建立 ThemeColor 枚舉和色彩定義
    - 實作深色模式色彩適配
    - 確保色彩對比度符合 WCAG 2.1 AA 標準
    - 建立漸層和陰影樣式定義
    - _需求: 需求 8, 11_

  - [x] 2.2 建立設計常數和樣式
    - 創建 Constants.swift 定義間距、字體、圓角等
    - 實作 Typography 系統和字體層級
    - 定義標準間距單位和佈局原則
    - 建立陰影系統和視覺效果
    - _需求: 需求 11_

  - [x] 2.3 實作 ThemeService
    - 建立主題管理服務
    - 實作淺色/深色主題切換邏輯
    - 使用 UserDefaults 儲存主題偏好
    - 提供主題變更的 Combine 發布者
    - _需求: 需求 11_

- [x] 3. 建立共用 UI 組件
  - [x] 3.1 實作 CustomButton 組件
    - 建立可重用的按鈕組件
    - 支援 primary、secondary、outline 三種樣式
    - 實作點擊縮放動畫效果
    - 支援圖示和文字組合
    - _需求: 需求 10_

  - [x] 3.2 實作 ProgressRing 組件
    - 建立圓形進度指示器組件
    - 支援漸層色彩和動畫效果
    - 可自訂大小和線條寬度
    - 實作進度變化的平滑動畫
    - _需求: 需求 3, 10_

  - [x] 3.3 實作 CardContainer 組件
    - 建立通用卡片容器組件
    - 支援標題、副標題、圖示和操作按鈕
    - 實作深淺色模式適配
    - 添加陰影和圓角樣式
    - _需求: 需求 11_

  - [x] 3.4 實作 CurrencyTextField 組件
    - 建立金額輸入專用文字欄位
    - 實作新台幣格式化和驗證
    - 支援數字鍵盤和輸入限制
    - 添加即時格式化顯示
    - _需求: 需求 1, 7_

  - [x] 3.5 實作其他共用組件
    - 建立 TagLabel 標籤組件
    - 實作 EmptyStateView 空狀態組件
    - 建立 GradientBackground 漸層背景組件
    - 實作 View 擴展和修飾符
    - _需求: 需求 11_

- [x] 4. 整合第三方動畫庫
  - [x] 4.1 整合 Lottie-iOS
    - 添加 Lottie-iOS 依賴到專案
    - 建立 LottieView SwiftUI 包裝器
    - 準備慶祝動畫和載入動畫資源
    - 實作動畫播放控制邏輯
    - _需求: 需求 12_

  - [x] 4.2 整合 SkeletonView
    - 添加 SkeletonView 相關依賴
    - 建立 SkeletonLoadingView 組件
    - 實作骨架屏動畫效果
    - 在資料載入時顯示骨架屏
    - _需求: 需求 10, 12_

  - [x] 4.3 實作數字計數動畫
    - 建立 CountingLabel 組件
    - 實作數字滾動動畫效果
    - 支援不同數字格式（金額、百分比）
    - 優化動畫效能和流暢度
    - _需求: 需求 1, 10, 12_

- [x] 5. 建立靜態 UI 頁面
  - [x] 5.1 實作首頁靜態 UI
    - 建立 HomeView 基本結構和導航
    - 實作總資產卡片的靜態版本（使用假資料）
    - 建立月度趨勢圖表的靜態版本
    - 實作快速操作區域的靜態佈局
    - _需求: 需求 1_

  - [x] 5.2 實作帳戶管理靜態 UI
    - 建立 AccountsListView 基本結構
    - 實作帳戶分組列表的靜態版本
    - 建立 AddAccountView 表單靜態 UI
    - 實作 AccountDetailView 詳情頁面靜態版本
    - _需求: 需求 2, 7_

  - [x] 5.3 實作儲蓄目標靜態 UI
    - 建立 GoalsListView 基本結構
    - 實作目標進度卡片的靜態版本
    - 建立 CreateGoalView 表單靜態 UI
    - 實作 GoalDetailView 詳情頁面靜態版本
    - _需求: 需求 3_

  - [x] 5.4 實作設定頁面靜態 UI
    - 建立 SettingsView 基本結構
    - 實作主題切換開關的靜態版本
    - 建立 NotificationSettingsView 靜態 UI
    - 實作資料管理頁面的靜態版本
    - _需求: 需求 11, 4_

  - [x] 5.5 實作導航和路由結構
    - 建立 TabView 底部導航結構
    - 設定各個主要頁面的路由
    - 實作基本的頁面轉場
    - 建立深層導航的靜態結構
    - _需求: 需求 9, 10_

- [x] 6. 設定 Core Data 資料模型
  - [x] 6.1 創建 Core Data 模型檔案
    - 建立 JellySave.xcdatamodeld 檔案
    - 定義 Account、SavingGoal、AssetSnapshot、NotificationSettings 實體
    - 設定實體屬性和關聯關係
    - 配置資料驗證規則
    - _需求: 需求 2, 3, 5_

  - [x] 6.2 實作 Core Data Stack
    - 建立 CoreDataStack.swift 類別
    - 實作 NSPersistentContainer 配置
    - 設定自動合併變更和錯誤處理
    - 提供統一的 context 存取介面
    - _需求: 需求 5, 9_

  - [x] 6.3 創建資料模型類別
    - 實作 AccountType 枚舉和相關方法
    - 為 Account 實體添加計算屬性和便利方法
    - 為 SavingGoal 實體添加進度計算邏輯
    - 實作資料驗證和格式化方法
    - _需求: 需求 2, 3_

- [x] 7. 建立服務層架構
  - [x] 7.1 實作 AccountService
    - 建立 AccountServiceProtocol 協議
    - 實作 AccountService 類別的 CRUD 操作
    - 使用 Combine 發布者處理非同步操作
    - 實作總資產計算邏輯
    - _需求: 需求 1, 2_

  - [x] 7.2 實作 SavingGoalService
    - 建立 SavingGoalServiceProtocol 協議
    - 實作儲蓄目標的建立、更新、完成邏輯
    - 實作每月所需儲蓄金額計算
    - 處理目標達成檢測和通知
    - _需求: 需求 3_

  - [x] 7.3 實作 NotificationService
    - 建立 NotificationServiceProtocol 協議
    - 實作通知權限請求邏輯
    - 實作每日通知排程功能
    - 從激勵名言庫隨機選擇通知內容
    - _需求: 需求 4_

- [x] 8. 實作動態功能和資料綁定
  - [x] 8.1 建立 HomeViewModel 和動態功能
    - 實作首頁業務邏輯和狀態管理
    - 整合 AccountService 獲取總資產資料
    - 將靜態 UI 升級為動態版本（資料綁定）
    - 實作資料重新整理和錯誤處理邏輯
    - _需求: 需求 1, 9_

  - [x] 8.2 建立 AccountsViewModel 和動態功能
    - 實作帳戶列表的業務邏輯和狀態管理
    - 整合 AccountService 進行 CRUD 操作
    - 將靜態帳戶 UI 升級為動態版本
    - 實作帳戶分組、排序和搜尋邏輯
    - _需求: 需求 2, 7_

  - [x] 8.3 建立 GoalsViewModel 和動態功能
    - 實作儲蓄目標的業務邏輯和狀態管理
    - 整合 SavingGoalService 進行目標操作
    - 將靜態目標 UI 升級為動態版本
    - 實作目標進度計算和更新邏輯
    - _需求: 需求 3, 7_

  - [x] 8.4 建立 SettingsViewModel 和動態功能
    - 實作設定頁面的業務邏輯和狀態管理
    - 整合 ThemeService 和 NotificationService
    - 將靜態設定 UI 升級為動態版本
    - 實作設定變更的即時套用邏輯
    - _需求: 需求 11, 4_

- [x] 9. 實作進階功能
  - [x] 9.1 實作慶祝動畫功能
    - 建立 CelebrationView 組件
    - 整合 Lottie 慶祝動畫效果
    - 實作目標達成觸發邏輯
    - 添加音效和震動回饋
    - _需求: 需求 3, 12_

  - [x] 9.2 實作激勵名言系統
    - 創建 InspirationalQuotes 資料結構
    - 準備投資建議和儲蓄激勵名言
    - 實作名言分類和隨機選擇邏輯
    - 整合通知排程和名言選擇
    - _需求: 需求 4_

  - [x] 9.3 實作資料管理功能
    - 建立資料匯出功能
    - 實作資料匯入和還原功能
    - 添加資料清除確認對話框
    - 實作備份檔案格式處理
    - _需求: 需求 5_

- [ ] 10. 實作安全功能
  - [ ] 10.1 整合生物識別認證
    - 建立 BiometricAuthService
    - 實作 Face ID/Touch ID 認證邏輯
    - 添加認證失敗處理機制
    - 整合應用程式啟動認證流程
    - _需求: 需求 6_

  - [ ] 10.2 實作 Keychain 服務
    - 建立 KeychainService 類別
    - 實作敏感資料的安全儲存
    - 添加資料加密和解密邏輯
    - 處理 Keychain 存取錯誤
    - _需求: 需求 6_

  - [ ] 10.3 實作應用程式鎖定功能
    - 建立應用程式鎖定狀態管理
    - 實作背景模式隱私保護
    - 添加自動鎖定計時器
    - 整合解鎖 UI 流程
    - _需求: 需求 6_

- [ ] 11. 效能優化和測試
  - [ ] 11.1 實作效能監控
    - 添加應用程式啟動時間監控
    - 實作記憶體使用量追蹤
    - 監控 Core Data 查詢效能
    - 優化動畫和 UI 渲染效能
    - _需求: 需求 9_

  - [ ] 11.2 實作錯誤處理系統
    - 建立統一的錯誤類型定義
    - 實作錯誤處理和用戶提示
    - 添加錯誤日誌和追蹤
    - 實作優雅的錯誤恢復機制
    - _需求: 需求 7_

  - [ ]* 11.3 撰寫單元測試
    - 為所有 Service 類別撰寫單元測試
    - 測試 ViewModel 的業務邏輯
    - 實作 Core Data 操作測試
    - 添加錯誤處理測試案例
    - _需求: 需求 9_

  - [ ]* 11.4 撰寫 UI 測試
    - 實作主要用戶流程的 UI 測試
    - 測試帳戶管理操作流程
    - 驗證儲蓄目標建立和更新流程
    - 測試設定和主題切換功能
    - _需求: 需求 11_

- [ ] 12. 無障礙功能實作
  - [ ] 12.1 實作無障礙標籤
    - 為所有互動元素添加適當的無障礙標籤
    - 實作語義化的 UI 結構
    - 添加無障礙提示和說明
    - 測試 VoiceOver 相容性
    - _需求: 需求 8_

  - [ ] 12.2 優化色彩對比度
    - 驗證所有色彩組合的對比度
    - 調整不符合標準的色彩搭配
    - 實作高對比度模式支援
    - 測試色盲友善性
    - _需求: 需求 8_

- [ ] 13. 最終整合和優化
  - [ ] 13.1 整合所有功能模組
    - 連接所有頁面和功能流程
    - 實作完整的用戶旅程
    - 測試跨模組的資料流
    - 優化模組間的通訊效能
    - _需求: 需求 7_

  - [ ] 13.2 進行全面測試和調優
    - 執行完整的功能測試
    - 進行效能基準測試
    - 測試各種裝置和螢幕尺寸
    - 優化應用程式啟動和響應時間
    - _需求: 需求 9_

  - [ ] 13.3 準備發布版本
    - 配置發布建置設定
    - 準備應用程式圖示和啟動畫面
    - 撰寫版本更新說明
    - 進行最終的品質保證檢查
    - _需求: 需求 9_

## 開發里程碑

### 里程碑 1: UI 設計系統 (任務 1-5)
- **目標**: 建立專案基礎、設計系統和靜態 UI
- **預估時間**: 2-3 週
- **交付物**: 完整的靜態 UI 頁面，設計系統和動畫組件

### 里程碑 2: 資料層和服務 (任務 6-7)
- **目標**: 完成資料模型和業務邏輯服務
- **預估時間**: 1-2 週
- **交付物**: Core Data 模型，完整的服務層架構

### 里程碑 3: 動態功能實作 (任務 8)
- **目標**: 將靜態 UI 升級為動態功能
- **預估時間**: 2-3 週
- **交付物**: 完整的功能頁面，基本用戶流程

### 里程碑 4: 進階功能和安全 (任務 9-10)
- **目標**: 完成進階功能和安全系統
- **預估時間**: 1-2 週
- **交付物**: 安全的應用程式，完整功能體驗

### 里程碑 5: 優化和發布 (任務 11-13)
- **目標**: 完成效能優化、測試和發布準備
- **預估時間**: 2-3 週
- **交付物**: 可發布的完整應用程式

## 開發注意事項

### 技術要求
- iOS 16.0+ 目標版本
- SwiftUI + Combine 響應式架構
- Core Data 本地資料持久化
- 遵循 MVVM 設計模式

### 品質標準
- 所有動畫保持 60fps 流暢度
- 應用程式啟動時間 < 2 秒
- 記憶體使用量 < 100MB
- 色彩對比度符合 WCAG 2.1 AA 標準

### 測試策略
- 每個功能模組完成後進行單元測試
- 主要用戶流程需要 UI 測試覆蓋
- 定期進行效能和記憶體測試
- 在多種裝置上測試相容性

### 風險管控
- 第三方庫整合可能需要額外調試時間
- 複雜動畫效果可能影響效能
- Core Data 遷移需要謹慎處理
- 生物識別功能需要實機測試
